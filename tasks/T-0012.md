# T-0012 · Design Snapshot & SCD Strategy

**Phase:** P-02
**State:** Done  
**Depends on:**  
- T-0008 (Data-Spec Sheet explicitly confirmed)
- T-0009 (Data-KPI Trace Matrix explicitly confirmed)

---

## Focus
Explicitly define and document:

1. **Snapshot tables**:  
   - Inventory Snapshot (daily closing stock-on-hand)  
   - Order Status Snapshot (daily status of open vs fulfilled orders)  

2. **Slowly Changing Dimension (SCD)** strategy:  
   - Type-2 dimension handling (UnitCost, SquareFootage)  
   - Surrogate Key (SK) creation explicitly  
   - Versioning and retention rules (ValidFrom, ValidTo, IsCurrent flags explicitly)

3. Explicitly document impact on existing KPIs and calculations.

---

## Deliverables
1. **Snapshot Strategy Document** (`Snapshot_Strategy.md`) explicitly covering:  
   - Table designs (FactInventorySnapshot, FactOrderStatus)  
   - Grain, fields, and explicit refresh rules  

2. **SCD Handling Document** (`SCD_Strategy.md`) explicitly covering:  
   - Surrogate key strategy (generation method explicitly)  
   - Versioning method (ValidFrom, ValidTo, IsCurrent explicitly documented)  
   - Retention & history cut-off explicitly stated  

3. **Updated Data-Spec Sheet v2.0** (`Data-Spec_Sheet_v2.0.md`) explicitly including new snapshot facts and SCD fields.

---

## Acceptance Criteria
- Explicit Governor confirmation of new snapshot tables' grain, fields, and refresh logic.  
- Explicit Governor confirmation of SCD handling rules (surrogate keys, versioning).  
- Data-Spec Sheet explicitly updated and confirmed with new structures.

---

## Work Steps (MECE)
1. **Draft Snapshot Tables**: Define explicit fields/grains based on identified gaps (e.g., daily closing quantities, open order statuses explicitly).
2. **Draft SCD Rules**: Define explicit surrogate keys, ValidFrom/ValidTo rules, and data retention explicitly.
3. **Impact Analysis**: Explicitly assess impacts on KPIs and transformations; document clearly.
4. **Review & Confirm**: Governor explicitly confirms all changes documented.
5. **Update Data-Spec Sheet explicitly**: Ensure snapshot & SCD changes integrated and explicitly versioned.

---

## Rationale
Addresses explicit gaps identified in the previous evaluation, enhancing the model's scalability, auditability, and accuracy for critical KPIs (Stock-on-Hand, Stock-out Rate, Sell-Through Rate, and historical margin analysis):contentReference[oaicite:0]{index=0}.

---

## Definition of Done
"Explicitly documented Snapshot and SCD strategies confirmed; Data-Spec Sheet explicitly updated (v2.0); Governor explicit approval."

---

**Log**
- *YYYY-MM-DD Executor →* Task explicitly created and ready for execution.
